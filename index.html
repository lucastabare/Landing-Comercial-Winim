<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
        integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./assets/style.css">
    <title>Document</title>
</head>

<body>

    <div class="main-header">
        <div class="container">
            <div class="row">
                <div class="col-xl-6 text-xl-left text-center">
                    <div class="text-xl-left img-logo">
                        <img src="./assets/img/logo-2.png" alt="logo-referido">
                    </div>
                    <h1 class="title-1 mx-xl-0 mx-auto mb-2 ">Registrá tu local</h1>
                    <p class="para-1 mx-xl-0 mx-auto">Accedé a un 30% off por 60 días sobre nuestra comisión.</p>
                </div>

                <div class="col-xl-6 d-xl-block form-container-form">
                    <div class="form-container" id="form-container">
                        <form form class=" ">
                            <div class="form-group row">
                                <div class="col-lg-12 mt-3">
                                    <label for="pais">
                                        <b>Seleciona tu País</b>
                                    </label>
                                    <select class="form-select" id="pais" name="pais" placeholder="Elige tu País"
                                        onchange="CargarLocalidadLocal()" required>
                                    </select>
                                    <span class="m-form__help"></span>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-lg-6">
                                    <label for="nombre">Nombre</label>
                                    <input type="text" class="form-control" placeholder="Nombre" id="nombre" required>
                                    <span class="m-form__help"></span>
                                </div>
                                <div class="col-lg-6">
                                    <label>Apellido</label>
                                    <input type="text" class="form-control" placeholder="Apellido" id="apellido"
                                        required>
                                    <span class="m-form__help"></span>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-lg-6">
                                    <label>Telefono</label>
                                    <div class="input-group">
                                        <input class="form-control phone" id="codArea" name="codArea" required
                                            type="text" placeholder="Cod área">
                                        <span class="input-group-text">
                                            -
                                        </span>
                                        <input class="form-control phone" id="telefono" name="telefono" required
                                            style="width: 40%;" type="text" placeholder="Teléfono">
                                    </div>
                                    <span class="m-form__help">
                                    </span>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-xl-6 col-xs-4">
                                    <label>Localidad</label>
                                    <select class="form-select" name="localidad" id="localidad" onchange="CargarZona()"
                                        required></select>
                                </div>
                                <div class="col-xl-6 col-xs-6 " id="divConoceZonaSi">
                                    <label>Zona</label>
                                    <select class="form-select" name="zona" id="zona" required></select>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-lg-12">
                                    <label data-tdp="tn15">Direccion</label>
                                    <input class="form-control" type="text" id="direccion" required>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-lg-12">
                                    <label>Email de acceso</label>
                                    <input class="form-control" type="email" id="email" required>
                                    <span class="m-form__help"></span>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-lg-6">
                                    <label>Nombre de tu empresa</label>
                                    <input class="form-control" type="text" id="nombreEmpresa">
                                    <span class="m-form__help"></span>
                                </div>
                                <div class="col-lg-6">
                                    <label>Cuit</label>
                                    <input class="form-control" type="text" id="cuit">
                                    <span class="m-form__help"></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-lg-12">
                                    <label>¿Te recomendó otro Restaurante/Negocio?</label>
                                    <input class="form-control" type="text" name="" id="idReferido"
                                        placeholder="¿Conoces el ID del Restaurante/Negocio que te refirió? Ingresa su número de ID">
                                    <span class="m-form__help"></span>
                                </div>
                            </div>
                            <div class="form-group m-form__group m-form__group--sm row end">
                                <div class="col-12 mt-3">
                                    <button type="button" class="btn btn-info mb-3" id="btn-send"
                                        onclick="EnviarFormulario($(this));">
                                        <span>
                                            <i class="fa fa-check"></i>
                                            Enviar
                                        </span>
                                    </button>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/js/all.min.js"
        integrity="sha512-8pHNiqTlsrRjVD4A/3va++W1sMbUHwWxxRPWNyVlql3T+Hgfd81Qc6FC5WMXDC+tSauxxzp1tgiAvSKFu1qIlA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>

<script>
    var url = "https://rapiboy.com";
    $("#document").ready(function () {
        // if (window.location.host.includes("localhost")) {
        //     url = "http://localhost:15527";
        // }
        // else if (window.location.host.includes("staging")) {
        //         url = "http://staging.rapiboy.com";                   
        // }

        CargarPais();

    })

    function EnviarFormulario(boton) {
        if ($('#pais').val() == "") {
            $('#pais').focus();
            return;
        }
        if ($('#nombre').val() == "") {
            $('#nombre').focus();
            return;
        }
        if ($('#apellido').val() == "") {
            $('#apellido').focus();
            return;
        }
        if ($('#codArea').val() == "") {
            $('#codArea').focus();
            return;
        }
        if ($('#telefono').val() == "") {
            $('#telefono').focus();
            return;
        }
        if ($('#localidad').val() == "") {
            $('#localidad').focus();
            return;
        }
        if ($('#zona').val() == "") {
            $('#zona').focus();
            return;
        }
        if ($('#direccion').val() == "") {
            $('#direccion').focus();
            return;
        }
        if ($("#email").val() == "") {
            $("#email").focus();
            return;
        }
        if ($('#nombreEmpresa').val() == "") {
            $('#nombreEmpresa').focus();
            return;
        }
        if ($('#cuit').val() == "") {
            $('#cuit').focus();
            return;
        }
        if ($('#idReferido').val() == "") {
            $('#idReferido').focus();
            return;
        }
        console.log("Enviando...");

            var thisData = {
                "Pais": $('#pais').val(),
                "Nombre": $('#nombre').val(),
                "Apellido": $('#apellido').val(),
                "CodArea": $('#codArea').val(),
                "Telefono": $('#telefono').val(),
                "Localidad": $('#localidad').val(),
                "Zona": $('#zona').val(),
                "Direccion": $('#direccion').val(),
                "Email": $('#email').val(),
                "NombreEmpresa": $('#nombreEmpresa').val(),
                "Cuit": $('#cuit').val(),
                "Condiciones": $('#condiciones').val(),
            };

            $.post(url + '/v1/Externo/NuevoRestauranteTN', thisData)
                .done(function (msg) {
                    notyf.success("Excelente! Datos Enviados Correctamente");
                    if (msg.Resultado = true) {
                        $('#BtnVolver').attr('href', msg.Redirect);
                    } else {
                        notyf.error("Error" + msg.mensaje)
                    }
                })
                .fail(function (xhr, status, error) {
                }).always(function (msg) {
                    boton.hide();
                });
    }

    function CargarPais() {
        $.ajax({
            url: url + '/v1/Externo/GetPaisesActivos',
            type: 'POST',
        }).done(function (data) {
            for (var i = 0; i < data.length; i++) {
                $("#pais").append("<option value='" + data[i].Id + "'>" + data[i].Nombre + "</option>");
            }
            CargarLocalidad();

        }).fail(function (msg) { });
    }

    function CargarLocalidad() {
        $.ajax({
            url: url + '/v1/Externo/GetLocalidadesActivas',
            data: { Id: $('#pais').val() },
            type: 'POST',
        }).done(function (data) {
            $("#localidad").empty();
            for (var i = 0; i < data.length; i++) {
                $("#localidad").append("<option value='" + data[i].Id + "'>" + data[i].Nombre + "</option>");
            }
            CargarZona();

        }).fail(function (msg) { });
    }

    function CargarZona() {
        $.ajax({
            url: url + '/v1/Externo/GetZonasActivas',
            data: { Id: $('#localidad').val() },
            type: 'POST',
        }).done(function (data) {
            $("#zona").empty();
            for (var i = 0; i < data.length; i++) {
                $("#zona").append("<option value='" + data[i].Id + "'>" + data[i].Nombre + "</option>");
            }
        }).fail(function (msg) { });
    }


</script>